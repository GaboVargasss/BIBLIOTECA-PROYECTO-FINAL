{% extends 'base.html' %}
{% block title %}Ingresar / Registrarse{% endblock %}

{% block extra_css %}
<style>
  body { overflow: hidden; }
  .auth-page {
    position: relative; min-height: 100vh;
    background: url('{{ url_for("static",filename="img/fachada.jpg") }}')
                center/cover fixed;
    color: #f1f1f1;
  }
  .auth-page .overlay {
    position: absolute; top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.6); z-index:1;
  }
  .login-card {
    position: relative; z-index:2;
    width: 100%; max-width: 360px;
    background: rgba(30,30,30,0.9);
    border: 1px solid #3A1F0B; border-radius:8px;
    box-shadow: 0 0 20px rgba(0,0,0,0.7);
    padding: 2rem;
    animation: fadeIn 1s ease-out;
  }
  .login-card h5 {
    font-family: 'Playfair Display', serif;
    text-align: center; margin-bottom:1.5rem;
    color: #D2B48C;
  }
  .form-control {
    background: #222; border:1px solid #333; color:#f1f1f1;
  }
  .form-control:focus { border-color:#9A4C10; }
  .btn-custom { background:#444; color:#f1f1f1; width:100%; }
  .btn-custom:hover { background:#666; }
  @keyframes fadeIn {
    from {opacity:0; transform:translateY(-20px);} to{opacity:1;transform:none;}
  }
</style>
{% endblock %}

{% block content %}
<main class="auth-page d-flex align-items-center justify-content-center">
  <div class="overlay"></div>
  <div class="login-card">
    <h5>ðŸ”® Hogwarts & Books</h5>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for cat,msg in messages %}
          <div class="alert alert-{{cat}}">{{msg}}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <ul class="nav nav-tabs mb-3" role="tablist">
      <li class="nav-item">
        <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#login">Iniciar SesiÃ³n</button>
      </li>
      <li class="nav-item">
        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#register">Registrarse</button>
      </li>
    </ul>

    <div class="tab-content">
      <div class="tab-pane fade show active" id="login">
        <form method="POST">
          <input type="hidden" name="action" value="login"/>
          <div class="mb-3">
            <label class="form-label">CÃ©dula</label>
            <input name="ci" class="form-control" required/>
          </div>
          <div class="mb-3">
            <label class="form-label">ContraseÃ±a</label>
            <input type="password" name="password" class="form-control" required/>
          </div>
          <button class="btn btn-custom mb-2">Ingresar</button>
        </form>
      </div>
      <div class="tab-pane fade" id="register">
        <form method="POST">
          <input type="hidden" name="action" value="register"/>
          <div class="mb-3">
            <label class="form-label">CÃ©dula</label>
            <input name="ci" class="form-control" required/>
          </div>
          <div class="mb-3">
            <label class="form-label">ContraseÃ±a</label>
            <input type="password" name="password" class="form-control" required/>
          </div>
          <button class="btn btn-custom mb-2">Crear Cuenta</button>
        </form>
      </div>
    </div>

    <form method="POST" class="mt-2">
      <input type="hidden" name="action" value="guest"/>
      <button class="btn btn-outline-light">Continuar como Visitante</button>
    </form>
  </div>
</main>
{% endblock %}
